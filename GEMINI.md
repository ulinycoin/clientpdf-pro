# GEMINI.md

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª—é—á–µ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–µ–∫—Ç–µ LocalPDF, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ (Gemini) –≤ —Ä–æ–ª–∏ –ì–ª–∞–≤–Ω–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.

## üöÄ –û–±–∑–æ—Ä –ü—Ä–æ–µ–∫—Ç–∞

**LocalPDF** ‚Äî —ç—Ç–æ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –¥–≤–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–Ω—Ü–∏–ø: **Privacy-first**. –í–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ PDF –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å—Ç—Ä–æ–≥–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (–≤ –±—Ä–∞—É–∑–µ—Ä–µ), –±–µ–∑ –æ—Ç–ø—Ä–∞–≤–æ–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

### üó£ –ü—Ä–∞–≤–∏–ª–∞ –û–±—â–µ–Ω–∏—è
*   **–Ø–∑—ã–∫:** –°—Ç—Ä–æ–≥–æ **–†–£–°–°–ö–ò–ô**.
*   **–†–æ–ª—å:** –ì–ª–∞–≤–Ω—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫.
*   **–°—Ç–∏–ª—å:** –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π, —á–µ—Ç–∫–∏–π, –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–π.

### üåü –ó–æ–ª–æ—Ç—ã–µ –ü—Ä–∞–≤–∏–ª–∞ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏
1.  **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –ß–µ—Å—Ç–Ω–æ—Å—Ç—å:** –ï—Å–ª–∏ –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞ –∏–ª–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ ‚Äî **–Ω–µ –≤—ã–¥—É–º—ã–≤–∞—Ç—å**. –ß–µ—Å—Ç–Ω–æ —Å–æ–æ–±—â–∏—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ.
2.  **–ì–ª—É–±–æ–∫–∏–π –ê–Ω–∞–ª–∏–∑:** –ï—Å–ª–∏ –Ω–µ —è—Å–Ω–æ –∫–∞–∫ —Ä–µ—à–∏—Ç—å ‚Äî –∏—Å–∫–∞—Ç—å –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ.
3.  **Best Practices:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ (React 19, Modern Tailwind).
4.  **–¶–µ–ª—å:** –°–æ–∑–¥–∞–≤–∞—Ç—å **–õ–£–ß–®–ò–ô** –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤ —Å–≤–æ–µ–º –∫–ª–∞—Å—Å–µ. –ö–æ–º–ø—Ä–æ–º–∏—Å—Å—ã –ø–æ –∫–∞—á–µ—Å—Ç–≤—É UI/UX –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
1.  **Website (Astro)** ‚Äî `/website`
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** SEO-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–µ–Ω–¥–∏–Ω–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.
    *   **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Astro.
    *   **URL:** `/merge-pdf`, `/split-pdf` –∏ —Ç.–¥.
    *   **SEO & GEO:**
        *   **SEO:** Schema.org (SoftwareApplication), Meta tags, Canonical URLs.
        *   **GEO (Generative Engine Optimization):** –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è AI-–ø–æ–∏—Å–∫–æ–≤–∏–∫–æ–≤ (Perplexity, ChatGPT, Gemini). –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è RAG (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å, FAQ, –ø—Ä—è–º—ã–µ –æ—Ç–≤–µ—Ç—ã).
    *   **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ:** –°—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ SPA-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ö—ç—à-—Ä–æ—É—Ç—ã (`/#merge`).
    *   **–Ø–∑—ã–∫ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:** –ê–Ω–≥–ª–∏–π—Å–∫–∏–π.

2.  **App-SPA (React)** ‚Äî `/src`
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ PDF.
    *   **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** React 19 + TypeScript + Vite.
    *   **–†–æ—É—Ç–∏–Ω–≥:** Hash-based SPA (`/#merge`, `/#split?lang=ru`).
    *   **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è:** EN, RU, DE, FR, ES, JA, IT, PT, ZH.
    *   **–†–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω (Initial load ~74 KB gzip).

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫ –∏ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏
*   **Core:** React 19, TypeScript, Vite.
*   **PDF Processing:** `pdf-lib` (–æ—Å–Ω–æ–≤–Ω–∞—è), `pdfjs-dist` (—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥/–∞–Ω–∞–ª–∏–∑), `tesseract.js` (OCR).
*   **Styling:** Tailwind CSS —Å–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –ø–∞–ª–∏—Ç—Ä–æ–π, –∏–º–∏—Ç–∏—Ä—É—é—â–µ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å macOS/iOS:
    *   `ocean-*`: Apple System Grays (Light/Dark/Midnight).
    *   `glass-premium`: –≠—Ñ—Ñ–µ–∫—Ç—ã Glassmorphism.
    *   `Inter`: –û—Å–Ω–æ–≤–Ω–æ–π —à—Ä–∏—Ñ—Ç (–∫–∞–∫ system-ui).
*   **State:** –õ–æ–∫–∞–ª—å–Ω—ã–π —Å—Ç–µ–π—Ç + —Ö—É–∫–∏ (`useHashRouter`, `useI18n`). –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–µ–π—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ü—Ä–∞–≤–∏–ª–∞
1.  **Code Splitting (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û):**
    *   –í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –ø–æ–¥–≥—Ä—É–∂–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ `React.lazy()`.
    *   –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ `pdf-lib`, `pdfjs-dist`, `tesseract.js` –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ `manualChunks` –≤ `vite.config.ts`.
    *   üõë **–ó–ê–ü–†–ï–©–ï–ù–û** –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –Ω–∞–ø—Ä—è–º—É—é –≤ `App.tsx`. –¢–æ–ª—å–∫–æ –ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞.

2.  **–†–æ—É—Ç–∏–Ω–≥:**
    *   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **HashRouter** (`window.location.hash`).
    *   –ù–∏–∫–∞–∫–æ–≥–æ `react-router-dom` –∏–ª–∏ History API –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ SPA.

3.  **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å:**
    *   üõë **–ó–ê–ü–†–ï–©–ï–ù–´** –ª—é–±—ã–µ –≤—ã–∑–æ–≤—ã –≤–Ω–µ—à–Ω–∏—Ö API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤.
    *   –í—Å–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Web Workers, WASM).

4.  **Testing Strategy (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û):**
    *   **Unit Tests:** Vitest (–∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è Vite) + @testing-library/react.
    *   **Scope:** `services/*Service.ts`, PDF-—É—Ç–∏–ª–∏—Ç—ã, Smart Features (—ç–≤—Ä–∏—Å—Ç–∏–∫–∏), i18n fallback.
    *   **–ü–æ—á–µ–º—É:** –ë—ã—Å—Ç—Ä–æ, –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –±–∞–Ω–¥–ª, –ª–æ–≤–∏—Ç 80% –±–∞–≥–æ–≤.

## üì¶ –†–∞–±–æ—á–∏–µ –ü—Ä–æ—Ü–µ—Å—Å—ã

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ù–æ–≤–æ–≥–æ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
1.  –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ `src/components/tools/NewTool.tsx`.
2.  –î–æ–±–∞–≤–∏—Ç—å Lazy Import –≤ `App.tsx`.
3.  –î–æ–±–∞–≤–∏—Ç—å –≤ Sidebar (`src/components/layout/Sidebar.tsx`) –∏ —Ç–∏–ø—ã (`src/types/index.ts`).
4.  –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –≤–æ **–≤—Å–µ** 9 —è–∑—ã–∫–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ (`src/locales/*.json`).
5.  –°–æ–∑–¥–∞—Ç—å SEO-—Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ `website/src/pages/new-tool.astro`.

### Smart Features (AI)
–í—Å–µ "—É–º–Ω—ã–µ" —Ñ—É–Ω–∫—Ü–∏–∏ (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –∞–Ω–∞–ª–∏–∑) —Ä–∞–±–æ—Ç–∞—é—Ç –ª–æ–∫–∞–ª—å–Ω–æ.
*   –õ–æ–≥–∏–∫–∞: `src/services/smart{Feature}Service.ts` (Singleton).
*   UI: `src/components/smart/Smart{Feature}Panel.tsx`.

#### –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è & Constraints
1.  **Definitions:**
    *   **–≠–≤—Ä–∏—Å—Ç–∏–∫–∏:** Regex, –∞–Ω–∞–ª–∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö, –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã.
    *   **AI/ML:** –ù–µ–π—Ä–æ—Å–µ—Ç–∏, Embeddings, WASM-–º–æ–¥–µ–ª–∏ (ONNX, Tesseract).

2.  **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (Constraints):**
    *   **Max Model Size:**
        *   Hard limit: **30 MB** (gzip) –Ω–∞ —Ñ–∏—á—É.
        *   Soft limit: **10 MB**.
    *   **–§–æ—Ä–º–∞—Ç—ã:**
        *   ‚úÖ **WASM** (Performance critical).
        *   ‚úÖ **ONNX Runtime Web** (Embeddings/Classification).
        *   ‚úÖ **TensorFlow.js** (Lightweight only).
    *   **Fallback Strategy:**
        *   –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ `navigator.hardwareConcurrency` –∏ `navigator.deviceMemory`.
        *   **Low-end devices:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ "—Ç—è–∂–µ–ª—ã—Ö" –º–æ–¥–µ–ª–µ–π -> –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —ç–≤—Ä–∏—Å—Ç–∏–∫—É (Graceful Degradation).

## üîÑ –¢–µ–∫—É—â–∏–π –°—Ç–∞—Ç—É—Å –∏ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ò–∑–º–µ–Ω–µ–Ω–∏—è

**–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
*   üöë **Visual Editor:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–¥–µ–ª–µ–Ω–∏—è, –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü.
*   üåç **i18n:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã —Ç–µ–∫—Å—Ç—ã –∑–∞–≥—Ä—É–∑–∫–∏, –¥–æ–±–∞–≤–ª–µ–Ω—ã —è–ø–æ–Ω—Å–∫–∏–π (JA) —è–∑—ã–∫, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏ –ø–µ—Ä–µ–≤–æ–¥–∞ (EditText).
*   üîí **ProtectPDF:** –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ UX, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è, –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞.
*   üìä **Analytics:** –ú–∏–≥—Ä–∞—Ü–∏—è —Å Vercel Analytics –Ω–∞ Google Analytics 4.

## üíª –ö–æ–º–∞–Ω–¥—ã –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
npm run dev:all      # –ó–∞–ø—É—Å–∫–∞–µ—Ç –∏ SPA (3000), –∏ Website (4321)

# –°–±–æ—Ä–∫–∞
npm run build:all    # –ü–æ–ª–Ω–∞—è —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
npm run build        # –¢–æ–ª—å–∫–æ SPA
npx tsc --noEmit     # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
```

---
*–ì–ª–∞–≤–Ω—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: Gemini*
