import{r as o,j as e}from"./react-vendor-7056d561.js";import{S as B,t as M}from"./SEOHead-62068eeb.js";import{E as I,u as R,B as F,P as L,H as A,F as H}from"./index-d5079f2d.js";import"./pdf-lib-vendor-cbec66d4.js";import{U as $}from"./UploadSection-f7e5251f.js";import"./pdfjs-vendor-36642749.js";import{R as z}from"./RelatedTools-29970fb3.js";import"./vendor-3f6e9ecd.js";import"./router-vendor-bd41c70c.js";import"./utils-vendor-4b732c04.js";import"./FileUploadZone-a9764bc0.js";const U=()=>{const[n,x]=o.useState(!1),[h,g]=o.useState(0),[t,r]=o.useState(null),[b,m]=o.useState(null),s=I.getInstance(),u=o.useCallback(async(c,d)=>{try{x(!0),g(0),r(null),m(null);const i=s.validateOptions(d);if(!i.valid)throw new Error(`Invalid options: ${i.errors.join(", ")}`);const p=await s.extractText(c,d,T=>{g(T)});p.success?m(p):r(p.error?.message||"Failed to extract text")}catch(i){const p=i instanceof Error?i.message:"Failed to extract text";r(p),console.error("[useExtractText] Error:",i)}finally{x(!1)}},[s]),j=o.useCallback(()=>{x(!1),g(0),r(null),m(null)},[]),f=o.useCallback(()=>s.getDefaultOptions(),[s]),N=o.useCallback((c,d)=>s.validateOptions(c,d),[s]),v=o.useCallback((c,d)=>{s.downloadAsTextFile(c,d)},[s]);return{isProcessing:n,progress:h,error:t,result:b,extractText:u,resetState:j,getDefaultOptions:f,validateOptions:N,downloadAsTextFile:v}},G=({files:n,onComplete:x,onClose:h,className:g=""})=>{const{t}=R(),{isProcessing:r,progress:b,error:m,result:s,extractText:u,resetState:j,getDefaultOptions:f,validateOptions:N,downloadAsTextFile:v}=U(),[c,d]=o.useState(f()),[i,p]=o.useState([]),[T,P]=o.useState(!1),[S,k]=o.useState(!1);o.useEffect(()=>{const a=N(c);p(a.errors)},[c,N]),o.useEffect(()=>{s&&s.success&&!S&&(v(s.data,n[0]?.name||"document.pdf"),k(!0),x(s))},[s,x,v,n,S]);const D=async()=>{if(n.length===0){p(["Please select a PDF file to extract text from"]);return}if(i.length>0)return;k(!1);const a=n[0];await u(a,c)},O=a=>{if(a===0)return"0 B";const l=1024,w=["B","KB","MB","GB"],C=Math.floor(Math.log(a)/Math.log(l));return`${parseFloat((a/Math.pow(l,C)).toFixed(1))} ${w[C]}`},y=n[0],E=s?.success&&s.data?.formattedText&&s.data?.text!==s.data?.formattedText;return e.jsxs("div",{className:`bg-white rounded-lg shadow-lg p-6 ${g}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t("pages.tools.extractText.tool.title")}),e.jsx("p",{className:"text-gray-600 mt-1",children:t("pages.tools.extractText.tool.description")})]}),e.jsx(F,{variant:"ghost",onClick:h,children:"✕"})]}),y&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:t("pages.tools.extractText.tool.fileToExtract")}),e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-2xl",children:"📄"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:y.name}),e.jsx("p",{className:"text-sm text-gray-500",children:O(y.size)})]})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:t("pages.tools.extractText.tool.extractionOptions")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.enableSmartFormatting,onChange:a=>d(l=>({...l,enableSmartFormatting:a.target.checked})),disabled:r,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("span",{className:"ml-3 text-sm font-medium text-blue-900",children:["✨ ",t("pages.tools.extractText.tool.smartFormatting")]})]}),e.jsx("p",{className:"ml-7 text-xs text-blue-700 mt-1",children:t("pages.tools.extractText.tool.smartFormattingDesc")})]}),c.enableSmartFormatting&&e.jsxs("div",{className:"ml-4 space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:t("pages.tools.extractText.tool.formattingLevel")}),e.jsx("div",{className:"space-y-2",children:[{value:"minimal",label:t("pages.tools.extractText.tool.levels.minimal.title"),desc:t("pages.tools.extractText.tool.levels.minimal.desc")},{value:"standard",label:t("pages.tools.extractText.tool.levels.standard.title"),desc:t("pages.tools.extractText.tool.levels.standard.desc")},{value:"advanced",label:t("pages.tools.extractText.tool.levels.advanced.title"),desc:t("pages.tools.extractText.tool.levels.advanced.desc")}].map(a=>e.jsxs("label",{className:"flex items-start",children:[e.jsx("input",{type:"radio",name:"formattingLevel",value:a.value,checked:c.formattingLevel===a.value,onChange:l=>d(w=>({...w,formattingLevel:l.target.value})),disabled:r,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 mt-0.5"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:a.label}),e.jsx("p",{className:"text-xs text-gray-600",children:a.desc})]})]},a.value))})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.includeMetadata,onChange:a=>d(l=>({...l,includeMetadata:a.target.checked})),disabled:r,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700",children:t("pages.tools.extractText.tool.includeMetadata")})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.preserveFormatting,onChange:a=>d(l=>({...l,preserveFormatting:a.target.checked})),disabled:r,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700",children:t("pages.tools.extractText.tool.preserveFormatting")})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:T,onChange:a=>{P(a.target.checked),a.target.checked||d(l=>({...l,pageRange:void 0}))},disabled:r,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700",children:t("pages.tools.extractText.tool.pageRange")})]}),T&&e.jsxs("div",{className:"ml-7 space-y-3 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("pages.tools.extractText.tool.pageRangeFields.startPage")}),e.jsx("input",{type:"number",min:"1",value:c.pageRange?.start||1,onChange:a=>d(l=>({...l,pageRange:{start:parseInt(a.target.value)||1,end:l.pageRange?.end||parseInt(a.target.value)||1}})),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("pages.tools.extractText.tool.pageRangeFields.endPage")}),e.jsx("input",{type:"number",min:c.pageRange?.start||1,value:c.pageRange?.end||1,onChange:a=>d(l=>({...l,pageRange:{start:l.pageRange?.start||1,end:parseInt(a.target.value)||1}})),disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:t("pages.tools.extractText.tool.pageRangeFields.note")})]})]})]}),r&&e.jsxs("div",{className:"mb-6",children:[e.jsx(L,{value:b,className:"mb-2",animated:!0}),e.jsx("p",{className:"text-sm text-gray-600 text-center",children:t("pages.tools.extractText.tool.extracting",{progress:Math.round(b).toString()})})]}),s&&s.success&&s.data&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-green-400 mr-2 mt-0.5",children:"✅"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-green-800 font-medium",children:t("pages.tools.extractText.tool.success.title")}),e.jsxs("div",{className:"text-green-700 text-sm mt-2 space-y-1",children:[e.jsxs("p",{children:["📄 ",t("pages.tools.extractText.tool.success.pagesProcessed",{count:s.data.pageCount.toString()})]}),e.jsxs("p",{children:["📝 ",t("pages.tools.extractText.tool.success.textLength",{length:s.data.text.length.toLocaleString()})]}),s.data.metadata?.title&&e.jsxs("p",{children:["📋 ",t("pages.tools.extractText.tool.success.documentTitle",{title:s.data.metadata.title})]}),s.data.metadata?.author&&e.jsxs("p",{children:["👤 ",t("pages.tools.extractText.tool.success.author",{author:s.data.metadata.author})]}),s.data.formatting?.applied&&e.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded",children:[e.jsxs("p",{className:"text-blue-800 font-medium text-xs",children:["✨ ",t("pages.tools.extractText.tool.success.smartFormattingApplied",{level:s.data.formatting.level})]}),e.jsx("p",{className:"text-blue-700 text-xs",children:s.data.formatting.changes.join(", ")})]}),e.jsxs("p",{children:["💾 ",t("pages.tools.extractText.tool.success.fileDownloaded")]}),s.metadata?.hasText===!1&&e.jsxs("p",{className:"text-orange-600",children:["⚠️ ",t("pages.tools.extractText.tool.success.noTextWarning")]})]}),E&&e.jsxs("div",{className:"mt-4 p-4 bg-white border border-green-300 rounded-lg",children:[e.jsxs("h5",{className:"font-medium text-gray-900 mb-3",children:["🔍 ",t("pages.tools.extractText.tool.success.comparisonPreview")]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium text-red-600 mb-2",children:["❌ ",t("pages.tools.extractText.tool.success.before")]}),e.jsx("div",{className:"p-2 bg-red-50 border border-red-200 rounded text-xs",children:e.jsxs("pre",{className:"whitespace-pre-wrap font-mono text-gray-700",children:[s.data.formattedText.substring(0,200),"..."]})})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-medium text-green-600 mb-2",children:["✅ ",t("pages.tools.extractText.tool.success.after")]}),e.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded text-xs",children:e.jsxs("pre",{className:"whitespace-pre-wrap font-mono text-gray-700",children:[s.data.text.substring(0,200),"..."]})})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:t("pages.tools.extractText.tool.success.notice")})]}),!E&&s.data.text&&s.data.text.length>50&&e.jsxs("div",{className:"mt-3 p-3 bg-white border border-green-200 rounded text-xs",children:[e.jsxs("p",{className:"font-medium text-gray-700 mb-2",children:["📄 ",t("pages.tools.extractText.tool.success.textPreview")]}),e.jsxs("p",{className:"text-gray-600 font-mono whitespace-pre-wrap",children:[s.data.text.substring(0,400),s.data.text.length>400&&"..."]})]})]})]})}),(m||i.length>0)&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-red-400 mr-2 mt-0.5",children:"⚠️"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-800 font-medium",children:t("common.error")}),m&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:m}),i.map((a,l)=>e.jsx("p",{className:"text-red-600 text-sm mt-1",children:a},l))]})]})}),e.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-blue-400 mr-2 mt-0.5",children:"🧠"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-800 font-medium",children:t("pages.tools.extractText.tool.infoBox.title")}),e.jsx("p",{className:"text-blue-700 text-sm mt-1",children:t("pages.tools.extractText.tool.infoBox.description")})]})]})}),e.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-green-400 mr-2 mt-0.5",children:"🔒"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-green-800 font-medium",children:t("pages.tools.extractText.tool.privacy.title")}),e.jsx("p",{className:"text-green-700 text-sm mt-1",children:t("pages.tools.extractText.tool.privacy.description")})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(F,{variant:"outline",onClick:h,disabled:r,children:t("common.cancel")}),e.jsx(F,{variant:"primary",onClick:D,disabled:n.length===0||r||i.length>0,loading:r,children:t(r?"pages.tools.extractText.tool.buttons.extracting":"pages.tools.extractText.tool.buttons.extractText")})]})]})},te=()=>{const{t:n}=R(),x=M.extractText,[h,g]=o.useState([]),[t,r]=o.useState(!1);o.useEffect(()=>{window.scrollTo(0,0)},[]);const b=u=>{const j=u.filter(f=>f.type==="application/pdf");j.length>0&&(g(j),r(!0))},m=u=>{console.log("Extract text completed:",u)},s=()=>{r(!1),g([])};return e.jsxs(e.Fragment,{children:[e.jsx(B,{title:x.title,description:x.description,keywords:x.keywords,canonical:x.canonical,structuredData:x.structuredData}),e.jsxs("div",{className:"min-h-screen bg-gradient-mesh flex flex-col",children:[e.jsx(A,{}),e.jsxs("main",{className:"flex-grow container mx-auto px-4 pt-20 pb-8",children:[e.jsxs("header",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:n("pages.tools.extractText.pageTitle")}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:n("pages.tools.extractText.pageDescription")})]}),e.jsx("section",{className:"mb-12",children:t?e.jsx(G,{files:h,onComplete:m,onClose:s}):e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx($,{onFilesSelected:b,multiple:!1,accept:"application/pdf",acceptedTypes:["application/pdf"],title:n("pages.tools.extractText.pageTitle"),subtitle:"Extract text content from PDF documents",emoji:"📝",supportedFormats:"PDF files"}),e.jsxs("div",{className:"text-center text-gray-600 mt-6",children:[e.jsx("p",{className:"mb-2",children:e.jsx("strong",{children:n("pages.tools.extractText.steps.upload")})}),e.jsx("p",{className:"mb-2",children:e.jsx("strong",{children:n("pages.tools.extractText.steps.choose")})}),e.jsx("p",{children:e.jsx("strong",{children:n("pages.tools.extractText.steps.download")})})]})]})}),e.jsx(z,{currentTool:"extractText",className:"mb-8"})]}),e.jsx(H,{})]})]})};export{te as default};
