import{r as l,j as e}from"./react-vendor-7056d561.js";import{S as O,t as Q}from"./SEOHead-62068eeb.js";import{f as G,B as d,h as H,Q as D,P as M,u as $,H as q,F as J}from"./index-d5079f2d.js";import"./pdf-lib-vendor-cbec66d4.js";import{F as _}from"./FileUploadZone-a9764bc0.js";import{U as L}from"./UploadSection-f7e5251f.js";import"./pdfjs-vendor-36642749.js";import{R as Y}from"./RelatedTools-29970fb3.js";import"./vendor-3f6e9ecd.js";import"./router-vendor-bd41c70c.js";import"./utils-vendor-4b732c04.js";const Z=({onClose:n,initialFile:r})=>{const[c,x]=l.useState(r||null),[m,p]=l.useState(!1),[g,v]=l.useState(null),[a,i]=l.useState(null),[N,f]=l.useState([]),[u,k]=l.useState("png"),[b,E]=l.useState("medium"),[o,S]=l.useState("all"),[y,w]=l.useState({start:1,end:1}),[T,R]=l.useState(""),[C,A]=l.useState("#ffffff"),P=G.getInstance();l.useEffect(()=>{r&&(x(r),i(null),f([]))},[r]);const U=l.useCallback(s=>{s.length>0&&(x(s[0]),i(null),f([]))},[]),F=async()=>{if(c){p(!0),i(null),f([]);try{const s={format:u,quality:b,pages:o,backgroundColor:u==="jpeg"?C:void 0};if(o==="range")s.pageRange=y;else if(o==="specific"){const j=T.split(",").map(h=>parseInt(h.trim())).filter(h=>!isNaN(h)&&h>0);s.pageNumbers=j}const t=await P.convertToImages(c,s,j=>{v(j)});if(i(t),t.success&&t.images.length>0){const j=t.images.slice(0,5).map(h=>h.dataUrl);f(j)}}catch(s){console.error("PDF to Image conversion failed:",s),i({success:!1,images:[],totalPages:0,originalSize:c.size,convertedSize:0,error:s instanceof Error?s.message:"Unknown error occurred"})}finally{p(!1)}}},z=s=>{a?.success&&a.images[s]&&P.downloadImage(a.images[s])},B=()=>{a?.success&&a.images.length>0&&P.downloadAllImages(a.images)},I=()=>{x(null),i(null),f([]),v(null),p(!1)};return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"PDF to Image Converter"}),n&&e.jsx(d,{variant:"outline",onClick:n,children:"Close"})]}),!c&&e.jsxs("div",{className:"mb-6",children:[e.jsx(_,{onFilesSelected:U,accept:"application/pdf",multiple:!1,maxSize:100*1024*1024,disabled:m,className:"mb-4"}),e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Upload a PDF file to convert its pages to images"})]}),c&&!a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Selected File"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-red-500",children:"ðŸ“„"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(c.size/1024/1024).toFixed(2)," MB"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Output Format"}),e.jsxs("select",{value:u,onChange:s=>k(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"png",children:"PNG"}),e.jsx("option",{value:"jpeg",children:"JPEG"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:H[u]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quality"}),e.jsx("select",{value:b,onChange:s=>E(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:Object.entries(D).map(([s,t])=>e.jsxs("option",{value:s,children:[s.charAt(0).toUpperCase()+s.slice(1)," (",t.resolution," DPI)"]},s))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:D[b].description})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pages to Convert"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"pageSelection",value:"all",checked:o==="all",onChange:s=>S(s.target.value),className:"mr-2"}),"All pages"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"pageSelection",value:"range",checked:o==="range",onChange:s=>S(s.target.value),className:"mr-2"}),"Page range"]}),o==="range"&&e.jsxs("div",{className:"ml-6 flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:1,value:y.start,onChange:s=>w(t=>({...t,start:parseInt(s.target.value)||1})),className:"w-16 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"From"}),e.jsx("span",{className:"text-gray-500",children:"to"}),e.jsx("input",{type:"number",min:y.start,value:y.end,onChange:s=>w(t=>({...t,end:parseInt(s.target.value)||1})),className:"w-16 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"To"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"pageSelection",value:"specific",checked:o==="specific",onChange:s=>S(s.target.value),className:"mr-2"}),"Specific pages"]}),o==="specific"&&e.jsxs("div",{className:"ml-6",children:[e.jsx("input",{type:"text",value:T,onChange:s=>R(s.target.value),placeholder:"e.g., 1, 3, 5-7, 10",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter page numbers separated by commas"})]})]})]}),u==="jpeg"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Color (for JPEG)"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",value:C,onChange:s=>A(s.target.value),className:"w-12 h-8 border border-gray-300 rounded cursor-pointer"}),e.jsx("span",{className:"text-sm text-gray-600",children:C})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(d,{onClick:F,disabled:m,loading:m,className:"flex-1",children:"Convert to Images"}),e.jsx(d,{variant:"outline",onClick:I,disabled:m,children:"Select Different File"})]})]}),m&&g&&e.jsx("div",{className:"mb-6",children:e.jsx(M,{progress:g.percentage,label:g.message||`Converting page ${g.currentPage} of ${g.totalPages}`,showPercentage:!0})}),a&&e.jsx("div",{className:"space-y-6",children:a.success?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-green-900 mb-2",children:"âœ… Conversion Successful!"}),e.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[e.jsxs("p",{children:["Converted ",a.images.length," pages to ",u.toUpperCase()]}),e.jsxs("p",{children:["Quality: ",b," (",a.metadata?.resolution," DPI) â€¢ Processing time: ",((a.metadata?.processingTime||0)/1e3).toFixed(1),"s"]}),e.jsxs("p",{children:["Total size: ",(a.convertedSize/1024/1024).toFixed(2)," MB"]})]})]}),N.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Preview"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[N.map((s,t)=>e.jsxs("div",{className:"bg-gray-100 rounded-lg p-2",children:[e.jsx("img",{src:s,alt:`Page ${t+1}`,className:"w-full h-24 object-contain rounded"}),e.jsxs("p",{className:"text-xs text-gray-600 text-center mt-1",children:["Page ",a.images[t]?.pageNumber]})]},t)),a.images.length>5&&e.jsx("div",{className:"bg-gray-100 rounded-lg p-2 flex items-center justify-center",children:e.jsxs("p",{className:"text-xs text-gray-600 text-center",children:["+",a.images.length-5," more"]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs(d,{onClick:B,className:"flex-1",children:["Download All Images (",a.images.length,")"]}),e.jsx(d,{variant:"outline",onClick:I,children:"Convert Another PDF"})]}),a.images.length>1&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Download Individual Images"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:a.images.map((s,t)=>e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>z(t),className:"text-xs",children:["Page ",s.pageNumber]},t))})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-red-900 mb-2",children:"âŒ Conversion Failed"}),e.jsx("p",{className:"text-sm text-red-700",children:a.error})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(d,{onClick:F,className:"flex-1",children:"Try Again"}),e.jsx(d,{variant:"outline",onClick:I,children:"Select Different File"})]})]})})]})},ce=()=>{const{t:n}=$(),r=Q.pdfToImage,[c,x]=l.useState([]),[m,p]=l.useState(!1);l.useEffect(()=>{window.scrollTo(0,0)},[]);const g=a=>{const i=a.filter(N=>N.type==="application/pdf");i.length>0&&(x(i),p(!0))},v=()=>{p(!1),x([])};return e.jsxs(e.Fragment,{children:[e.jsx(O,{title:r.title,description:r.description,keywords:r.keywords,canonical:r.canonical,structuredData:r.structuredData}),e.jsxs("div",{className:"min-h-screen bg-gradient-mesh flex flex-col",children:[e.jsx(q,{}),e.jsxs("main",{className:"flex-grow container mx-auto px-4 pt-20 pb-8",children:[e.jsxs("header",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:n("pages.tools.pdfToImage.pageTitle")}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:n("pages.tools.pdfToImage.pageDescription")})]}),e.jsx("section",{className:"mb-12",children:m?e.jsx(Z,{initialFile:c[0],onClose:v}):e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx(L,{onFilesSelected:g,multiple:!1,accept:"application/pdf",acceptedTypes:["application/pdf"],title:n("pages.tools.pdfToImage.pageTitle"),subtitle:"Convert PDF pages to high-quality images",emoji:"ðŸ“·",supportedFormats:"PDF files"}),e.jsxs("div",{className:"text-center text-gray-600 mt-6",children:[e.jsx("p",{className:"mb-2",children:e.jsx("strong",{children:n("pages.tools.pdfToImage.steps.upload")})}),e.jsx("p",{className:"mb-2",children:e.jsx("strong",{children:n("pages.tools.pdfToImage.steps.format")})}),e.jsx("p",{children:e.jsx("strong",{children:n("pages.tools.pdfToImage.steps.download")})})]})]})}),e.jsx(Y,{currentTool:"pdfToImage",className:"mb-8"})]}),e.jsx(J,{})]})]})};export{ce as default};
