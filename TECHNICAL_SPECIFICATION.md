# Техническая спецификация: LocalPDF v3.0

## 1. Обзор проекта

**LocalPDF v3.0** — это полностью переработанная версия веб-приложения для работы с PDF-файлами. Ключевой особенностью является обработка всех данных на стороне клиента (в браузере), что гарантирует 100% конфиденциальность, так как файлы никогда не покидают компьютер пользователя.

Проект представляет собой одностраничное приложение (SPA), разработанное с упором на максимальную производительность и быструю загрузку.

- **Версия:** 3.0.0
- **Основной репозиторий:** `https://github.com/ulinycoin/clientpdf-pro`
- **Публичный сайт:** `https://localpdf.online`

## 2. Архитектура и технологии

### 2.1. Двойная архитектура

Проект состоит из двух независимых, но связанных частей:

1.  **Основное приложение (SPA)**:
    -   **Расположение:** `/src`
    -   **Технологии:** React 19, TypeScript, Vite.
    -   **Назначение:** Предоставление интерактивных инструментов для работы с PDF.
    -   **Маршрутизация:** Хэш-роутинг (`/#merge`, `/#split`), что обеспечивает корректную работу в любом окружении.

2.  **SEO-сайт (Static Site)**:
    -   **Расположение:** `/website`
    -   **Технологии:** Astro, Tailwind CSS.
    -   **Назначение:** Создание статических SEO-оптимизированных страниц для поисковых систем (`/merge-pdf`, `/split-pdf`), которые ссылаются на основной инструментарий в SPA.

### 2.2. Основные технологии

- **Frontend:** React 19, TypeScript
- **Сборщик:** Vite
- **Сайт:** Astro
- **Стилизация:** Tailwind CSS
- **Работа с PDF:** `pdf-lib`, `pdfjs-dist`
- **OCR (Распознавание текста):** `tesseract.js`
- **Интернационализация (i18n):** Поддержка 5 языков (EN, RU, DE, FR, ES)

## 3. Ключевые изменения и исправления (Версия 3.0.0)

Это версия является полным переписыванием проекта (breaking change) и несовместима с v2. Основные улучшения и исправления включают:

### 3.1. Архитектурные изменения

- **Полный рефакторинг:** Проект переписан с нуля с использованием современного стека (React 19, Vite).
- **Новая система маршрутизации:** Внедрен хэш-роутинг для стабильности и простоты развертывания.
- **Компонентная структура:** Реализована новая, более модульная структура компонентов.

### 3.2. Оптимизация производительности

- **Уменьшение размера бандла:** Начальный размер загрузки сокращен на **91%** (с 817 KB до ~74 KB в gzip).
- **Ленивая загрузка (Lazy Loading):** Все PDF-инструменты и тяжелые библиотеки (`pdf-lib`, `tesseract.js`) загружаются только по требованию (когда пользователь открывает соответствующий инструмент), а не при первоначальной загрузке сайта.
- **Разделение кода (Code Splitting):** Зависимости вынесены в отдельные "чанки", которые подгружаются асинхронно.

### 3.3. Функциональные улучшения

- **11 PDF-инструментов:** Реализован полный набор инструментов для слияния, разделения, сжатия, защиты, распознавания и редактирования PDF.
- **Многоязычность:** Добавлена поддержка 5 языков с возможностью расширения.
- **Улучшенный UX:** Внедрены индикаторы прогресса и детальная обработка ошибок для всех операций.

## 4. Реализованные инструменты

На данный момент реализовано 11 из 17 запланированных инструментов:

**Основные:**
- Merge PDF (`/#merge`)
- Split PDF (`/#split`)
- Compress PDF (`/#compress`)
- Protect PDF (`/#protect`)
- OCR PDF (`/#ocr`)

**Редактирование:**
- Watermark PDF (`/#watermark`)
- Add Text PDF (`/#add-text`)
- Rotate PDF (`/#rotate`)
- Delete Pages (`/#delete-pages`)
- Extract Pages (`/#extract-pages`)
- Images to PDF (`/#images-to-pdf`)

## 5. Сборка и разработка

Ключевые команды для работы с проектом:

- `npm run dev`: Запуск сервера для разработки основного приложения (SPA).
- `npm run dev:all`: Одновременный запуск серверов для SPA и SEO-сайта.
- `npm run build`: Сборка production-версии основного приложения.
- `npm run build:all`: Сборка обеих частей проекта для деплоя на Vercel.
- `npx tsc --noEmit`: Проверка типов TypeScript.
- `npm run lint`: Запуск линтера для проверки качества кода.
